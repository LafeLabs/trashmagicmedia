<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">

        <!--

TRASH MAGIC MEDIA NETWORK

EVERYTHING IS PHYSICAL
EVERYTHING IS FRACTAL
EVERYTHING IS RECURSIVE

NO MONEY
NO MINING
NO PROPERTY

LOOK AT THE FUNGI
LOOK AT THE INSECTS
LANGUAGE IS HOW THE MIND PARSES REALITY


    github.com/lafelabs/trashmagicmedia
    
    All Code, text, art, media, technology, and ideas CC0 PUBLIC DOMAIN


    -->
    
<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAD+fwAA/n8AAOfnAADzzwAAuB0AAJ/5AADH4wAAcY4AADw8AACf+QAAz/MAAOPHAAD4HwAA" rel="icon" type="image/x-icon" />

   <title>TRASH MAGIC MEDIA</title>    
<script src = "https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

</head>
<body>    
<h1><a href = "https://www.github.com/lafelabs/trashmagicmedia/">TRASH MAGIC MEDIA</a></h1>
<p>
    Physically Local Digital Media
</p>


<img style = "max-width:40%;display:block;margin:auto" src="https://raw.githubusercontent.com/LafeLabs/crustweb/main/images/replicator.jpg"/>

<ul>
    <li>
        <a href = "web/">Learn to Weave the Web</a>
    </li>
    <li>
        <a href = "https://www.github.com/lafelabs/crustweb/">Replicate CRUST WEB server</a>
    </li>
    <li>
        <a href = "images.html">Images</a>
    </li>
    <li>
        <a href = "media.html">Media</a>
    </li>
    <li>
        <a href = "scroll.html">Trash Magic Books</a>
    </li>
</ul>

<div id = "qrcode"></div>
<h3><a id=  "serverlink"></a></h3>
<table>
    <tr>
        <td>Server URL(http://[your ip address]/):</td><td><input id = "serverurlinput"/></td>
    </tr>
</table>

<script>

serverurl = "http://localhost/";

codesquaresize = 200;
document.getElementById("qrcode").style.width = codesquaresize.toString() + "px";
qrcode = new QRCode(document.getElementById("qrcode"), {
	text: serverurl,
	width: codesquaresize,
	height: codesquaresize,
	colorDark : "#000000",
	colorLight : "#ffffff",
	correctLevel : QRCode.CorrectLevel.H
});


var httpc666 = new XMLHttpRequest();
httpc666.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            serverurl = this.responseText;
            loadserver();
        }
    };
httpc666.open("GET", "fileloader.php?filename=data/serverurl.txt", true);
httpc666.send();



document.getElementById("serverurlinput").onchange = function(){
    serverurl = this.value;
    loadserver();
    saveserver();
}


function loadserver(){
    document.getElementById("serverlink").href = serverurl;
    document.getElementById("serverlink").innerHTML = serverurl;
    document.getElementById("serverurlinput").value = serverurl;
    qrcode.makeCode(serverurl);
}

function saveserver(){

    var httpc = new XMLHttpRequest();
    var url = "filesaver.php";        
    httpc.open("POST", url, true);
    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
    httpc.send("data="+serverurl+"&filename=data/serverurl.txt");//send text to filesaver.php
}


</script>
<style>
input{
    background-color:black;
    color:#00ff00;
    font-family:courier;
    border-color:#00ff00;
}
table{
    font-family:courier;
    font-size:14px;
}
body{
    font-size:2em;
    padding:0em 4em 4em 4em;
    overflow:scroll;
    background-color:black;
    color:#00ff00;
}
#qrcode{
    border:solid;
    border-width:20px;
    border-color:#808080;
}
h1{
    text-align:center;
}
a{
    color:#ff2cb4;
}
</style>
</body>
</html>
